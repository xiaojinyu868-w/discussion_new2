# 技术设计方案

## 目标
- 在现有前后端架构中引入“场景预设 + 热词表”能力，提升转写纠错准确性。
- 保持接口向后兼容，默认场景与默认热词表可用。

## 架构与流程
- 前端在会议开始前提供场景选择入口，将场景标识提交至后端。
- 后端在创建转写任务时，根据场景选择加载热词表并拼接 Prompt/自定义词表参数。
- LLM/ASR 任务执行时使用场景提示 + 热词表进行纠错与转写增强。

```mermaid
flowchart LR
  UI[前端: 场景选择] --> API[后端: CreateTask]
  API --> CFG[场景与热词加载]
  CFG --> LLM[ASR/LLM 纠错]
  LLM --> OUT[转写结果]
```

## 技术栈与选型
- 前端: 现有前端技术栈（保持一致），新增场景选择控件。
- 后端: 现有后端技术栈（保持一致），扩展 CreateTaskRequestParameters。
- 配置与数据: 先以配置文件/常量形式保存热词表，后续可迁移至配置中心或数据库。

## 数据与配置设计
- 场景枚举: `default | tech | edu | soe | finance`。
- 热词表: 按场景保存为数组，后端按场景装载。
- Request 参数扩展:
  - `customParams` 或 `phrases` 字段承载热词表。
  - `scene` 字段承载场景标识。

## 接口设计
- `POST /tasks/create` (示意)
  - 请求新增字段: `scene`, `customParams`/`phrases`。
  - 若无 `scene` 则使用 `default`。
- 兼容策略: 旧客户端不传 `scene` 时不影响创建。

## 测试策略
- 单元测试: 场景与热词表选择逻辑、默认场景回退。
- 接口测试: CreateTask 参数透传与后端拼接正确性。
- 手工验证: 各场景纠错样例（如“对起”->“对齐”）。

## 安全与风险
- 输入校验: `scene` 必须在允许列表内。
- 配置可控: 热词表仅由管理员维护，避免注入异常内容。
- 风险: 热词表过长可能影响响应时延，需限制条目数。
